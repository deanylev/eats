<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dean's Favourite Eats</title>
  <meta name="description" content="nom">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      background: #180321;
      color: #fcf6fe;
      font-family: 'Poppins', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      padding: 15px;
    }

    .title {
      font-size: 50px;
      line-height: 60px;
    }

    @media only screen and (max-width: 600px) {
      .title {
        font-size: 35px;
      }
    }

    @media only screen and (max-width: 400px) {
      .title {
        font-size: 30px;
      }
    }

    .heading {
      font-size: 28px;
      padding-top: 15px;
    }

    .subHeading {
      color: #e8a61a;
      font-size: 20px;
      font-weight: 700;
      padding-left: 5px;
      text-decoration: underline;
    }

    .body {
      padding: 10px;
    }

    .sorting > div {
      padding: 3px 0;
    }

    #placesContainer {
      align-items: flex-start;
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 25px;
    }

    #placesContainer > div {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    #placesContainer > div > div {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      max-width: 450px;
      padding: 15px 20px;
    }

    #placesContainer > div > div > .areaOrType {
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="title">Dean's Favourite Eats</div>
  <div><span id="numPlaces">n</span> entries and counting</div>
  <div class="body">
    <div class="sorting">
      <div>
        <label for="city">City:</label>
        <select id="city"></select>
      </div>
      <div>
        <label for="mealType">Meal Type:</label>
        <select id="mealType"></select>
      </div>
      <div>
        <label for="category">Categorise By:</label>
        <select id="category">
          <option value="area">Area</option>
          <option value="type">Type of Food</option>
          <option id="mealTypeCategory" value="mealType">Type of Meal</option>
        </select>
      </div>
      <div>
        <label for="status">Status:</label>
        <select id="status">
          <option value="tried">Tried</option>
          <option value="wanted">Want to Try</option>
        </select>
      </div>
    </div>
    <div id="placesContainer"></div>
  </div>
  <script>
    // too tired of Create React App

    const emojisByType = {
      American: 'ðŸ‡ºðŸ‡¸',
      Asian: 'ðŸ¥¢',
      Australian: 'ðŸ¦˜',
      BBQ: 'ðŸ–',
      Bagels: 'ðŸ¥¯',
      Bakery: 'ðŸž',
      Berders: 'ðŸ”',
      Cafe: 'â˜•ï¸',
      Cookies: 'ðŸª',
      Diner: 'ðŸ¥ž',
      Donuts: 'ðŸ©',
      Dutch: 'ðŸ‡³ðŸ‡±',
      'Food Courts': 'ðŸ´',
      French: 'ðŸ‡«ðŸ‡·',
      'Fried Chicken': 'ðŸ—',
      German: 'ðŸ‡©ðŸ‡ª',
      Greek: 'ðŸ‡¬ðŸ‡·',
      'Ice Cream': 'ðŸ¦',
      Indian: 'ðŸ‡®ðŸ‡³',
      Italian: 'ðŸ',
      Japanese: 'ðŸ£',
      Mexican: 'ðŸŒ®',
      Pizza: 'ðŸ•',
      Pubs: 'ðŸ»',
      Ramen: 'ðŸœ',
      Sandwiches: 'ðŸ¥–',
      Steak: 'ðŸ¥©',
      Thai: 'ðŸ‡¹ðŸ‡­'
    };
    const triedPlaces = {
      Australia: {
        Melbourne: [
          {
            area: 'Armadale',
            mealType: 'Lunch',
            name: "Hank's CafÃ© & Bagelry",
            notes: 'Came here because of a TikTok and did not disappoint. Great coffee and bagels, loved both the pastrami and schnitzel',
            type: 'Bagels',
            url: 'https://maps.app.goo.gl/KWFtUbgrURAfaxMZ9'
          },
          {
            area: 'Armadale',
            mealType: 'Sopper Time',
            name: 'Neighbourhood Pizza',
            notes: "Haven't had the pasta but the pizza is delicious",
            type: 'Italian',
            url: 'https://maps.app.goo.gl/GkRp3E7U9TQFKEZbA'
          },
          {
            area: 'Malvern',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Kolonaki',
            notes: 'Genuinely one of the tastiest places in Melbourne. Wish they would answer the damn phone!',
            type: 'Greek',
            url: 'https://maps.app.goo.gl/9JuWQS1p1cespya3A'
          },
          {
            area: 'Bentleigh',
            mealType: 'Sopper Time',
            name: 'Da Giuseppe',
            notes: 'Some of my favourite woodfire pizza, really nice family run place',
            type: 'Pizza',
            url: 'https://maps.app.goo.gl/Ee5AVG9Gm8fciTry8'
          },
          {
            area: 'Bentleigh',
            mealType: 'Lunch',
            name: 'Sushi Factory',
            notes: 'Cheap, delicious sushi. A staple of Centre Rd',
            type: 'Japanese',
            url: 'https://maps.app.goo.gl/WRYJVVWQvBjf4vxe9'
          },
          {
            area: 'Bentleigh',
            mealType: 'Lunch',
            name: "Milo's Deli",
            notes: 'For a while I got a sandwich here every single Friday, they are delicious',
            type: 'Sandwiches',
            url: 'https://maps.app.goo.gl/U9RckXW1xE9atvzC6'
          },
          {
            area: 'McKinnon',
            mealType: 'Sopper Time',
            name: 'Ohana',
            notes: 'Delicious woodfired pizza and super friendly staff. Recommended to me by Nat, the CEO of Vivi, and did not disappoint',
            type: 'Pizza',
            url: 'https://maps.app.goo.gl/qR1WsxQX9ZHpjCpr9'
          },
          {
            area: 'Brighton',
            mealType: 'Sopper Time',
            name: 'Cucina & Co',
            notes: 'Delicious pizza and pasta. Came back plenty of times even though they made us wait literally an hour for our booked table on our first visit',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/VNPdkSGgdih61W6A7'
          },
          {
            area: 'Brighton',
            mealType: ['Breakfast', 'Lunch'],
            name: 'Saint Martins CafÃ©',
            notes: 'Great coffee and an absolutely delicious beef berder (spoiled somewhat by being served with crisps instead of fries)',
            type: 'Cafe',
            url: 'https://maps.app.goo.gl/tffXhHyXH8bGYgUP9'
          },
          {
            area: ['Brighton', 'Camberwell', 'Elsternwick'],
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Kokoro',
            notes: 'Great sushi train, lots of variety and not too expensive',
            type: 'Japanese',
            url: 'https://www.kokorosushi.com.au'
          },
          {
            area: 'Carlton',
            mealType: 'Sopper Time',
            name: 'Capitano',
            notes: 'Deep dish pizza to die for. I think the pasta and tiramisu are kind of overrated but the deep dish more than makes up for it',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/kMfZYJxK9BADeeJv9'
          },
          {
            area: 'CBD',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Five Guys',
            notes: 'Genuinely my favourite berders in Melbourne. Great milkshakes too',
            type: 'Berders',
            url: 'https://maps.app.goo.gl/67jsqjcVt2SMTRD99'
          },
          {
            area: 'Prahan',
            mealType: 'Lunch',
            name: 'Le Petit MarchÃ©',
            notes: 'EntrecÃ´te steak and sauce in a delicious baguette. Hits the spot every time',
            type: 'Sandwiches',
            url: 'https://maps.app.goo.gl/Q6U1fDVD7GsFMx2VA'
          },
          {
            area: 'Prahan',
            mealType: ['Breakfast', 'Lunch'],
            name: 'Hobba',
            notes: 'Great coffee + chicken and waffles â¤ï¸',
            type: 'Cafe',
            url: 'https://maps.app.goo.gl/BPkJe2DecMmiUtVm7'
          },
          {
            area: ['Prahan', 'Port Melbourne'],
            mealType: 'Sopper Time',
            name: 'Marbl',
            notes: 'Best steak in town, especially for the money. Extremely friendly owners',
            type: 'Steak',
            url: 'https://www.marblsteakhouse.com.au'
          },
          {
            area: ['Richmond', 'South Melbourne', 'Fitzroy'],
            mealType: 'Lunch',
            name: "Hector's Deli",
            notes: 'Beef and pickles toastie is geniuinely to die for, and some of the best glazed donuts I have ever had. Great coffee too',
            type: 'Sandwiches',
            url: 'https://hectorsdeli.com.au/pages/pre-order'
          },
          {
            area: 'St Kilda',
            mealType: 'Sopper Time',
            name: 'Radio Mexico',
            notes: 'The only Mexican food I have had outside the US that I genuinely love',
            type: 'Mexican',
            url: 'https://maps.app.goo.gl/6ZFv2gMTUo7VN8ZY6'
          },
          {
            area: ['St Kilda', 'Hawthorn'],
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Rococo',
            notes: 'Well known but slept on. Huge menu variety and always (I mean always) has a table available last minute',
            type: 'Italian',
            url: 'https://www.rococo.net.au'
          },
          {
            area: 'South Yarra',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Gilson',
            notes: "Melbourne's version of Bar Totti's, i.e. you rip off pieces of delicious bread and dip it in toppings of your choice. Great pasta too",
            type: 'Italian',
            url: 'https://maps.app.goo.gl/jHDwJwrtGocZuPqA8'
          },
          {
            area: 'South Yarra',
            mealType: 'Sopper Time',
            name: "Leonard's House of Love",
            notes: 'Best fried chicken berder in Melbourne. I used to come here with my coworkers in the early, scrappy days of Vivi so it holds a special place in my heart',
            type: 'Pubs',
            url: 'https://maps.app.goo.gl/YzUG1E4GR4PHka2K7'
          },
          {
            area: 'South Yarra',
            mealType: ['Breakfast', 'Lunch'],
            name: 'Moose Bar & CafÃ©',
            notes: 'I get a berder and chips here at least once a week, so simple and tasty. Staff are all absolute legends',
            type: 'Cafe',
            url: 'https://maps.app.goo.gl/KsoW4EUNhCV99NDo7'
          },
          {
            area: 'South Yarra',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Pink Ginger JP',
            notes: 'Fresh, delicious Japanese food, a great lunch spot',
            type: 'Japanese',
            url: 'https://maps.app.goo.gl/KQdb9YJMA9YxYbh28'
          },
          {
            area: 'South Yarra',
            mealType: 'Snacc',
            name: 'itteki',
            notes: "Adorable Japanese cafe with some of the nicest staff around, great coffee, and extremely high quality merch of the owner's Shiba Inu. No food or proper seating, but I love this place so much that it has to get a mention",
            type: 'Cafe',
            url: 'https://maps.app.goo.gl/arRRrqF1Eo44jaoNA'
          },
          {
            area: 'Brighton',
            mealType: 'Sopper Time',
            name: 'Bantatthong Thai Restaurant',
            notes: 'I am not the biggest fan of Thai food but this place is excellent, and very reasonably priced, especially for the area',
            type: 'Thai',
            url: 'https://maps.app.goo.gl/qTQ2B4t5p4b9uyRX9'
          },
          {
            area: 'Hawthorn',
            mealType: 'Lunch',
            name: 'Piccolo Panini Bar',
            notes: 'Waited 45 minutes for the sandwich but it was well worth it, delicious bread and schnitzel',
            type: 'Sandwiches',
            url: 'https://maps.app.goo.gl/DFG9JVJ3GHL4Sup39'
          },
          {
            area: 'Carnegie',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Shyun Ramen Bar',
            notes: 'Solid and pretty cheap ramen, great gyozas too',
            type: 'Ramen',
            url: 'https://maps.app.goo.gl/5xP1M3fZPrqg93HN6'
          },
          {
            area: 'South Yarra',
            mealType: 'Snacc',
            name: 'Maker and Monger',
            notes: 'Absolutely delicious cheese toasties, the main guy kind of reminds me of the Seinfeld soup nazi (in a good way)',
            type: 'Sandwiches',
            url: 'https://maps.app.goo.gl/4nsUoGssYg1yYp6Y7'
          },
          {
            area: 'Elwood',
            mealType: ['Breakfast', 'Lunch'],
            name: 'Plain Sailing',
            notes: 'Nails the fundamentals, great coffee and eggs',
            type: 'Cafe',
            url: 'https://maps.app.goo.gl/tLj4kZMUhixWrRw17'
          },
          {
            area: 'Brighton',
            mealType: ['Breakfast', 'Lunch'],
            name: 'Zeppelin Kitchen',
            notes: 'Biggest iced latte in the game',
            type: 'Cafe',
            url: 'https://maps.app.goo.gl/TNuWe9MRKuGdEHtK7'
          },
          {
            area: 'South Yarra',
            mealType: ['Breakfast', 'Lunch'],
            name: 'Middle South East',
            notes: 'Chicken shawarma wrap is so reasonably priced and so good, great coffee too (although the deconstructed iced lattes are a bit annoying)',
            type: 'Cafe',
            url: 'https://maps.app.goo.gl/YTf1xWDKD6YXVSnc6'
          }
        ],
        Rye: [
          {
            area: 'Red Hill',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Red Gum BBQ',
            notes: 'Not technically in Rye but a close enough drive if you are staying there. Absolutely delicious BBQ meats + mac and cheese. Would love to try dessert next time.',
            type: 'BBQ',
            url: 'https://maps.app.goo.gl/PkLpJ66hbdJecGte6'
          },
          {
            area: 'Rye',
            mealType: ['Breakfast', 'Lunch'],
            name: 'STORE 360 RYE',
            notes: 'Amazing chicken baguette and coffee',
            type: 'Bakery',
            url: 'https://maps.app.goo.gl/PkLpJ66hbdJecGte6'
          }
        ],
        Sydney: [
          {
            area: ['CBD', 'Bondi'],
            mealType: ['Lunch', 'Sopper Time'],
            name: "Bar Totti's",
            notes: "Bread w/ toppings and pasta are absolutely out of this world. Will never forget coming here for my friend Mia's birthday in activewear and splitting a $700 bottle of wine",
            type: 'Italian',
            url: 'https://merivale.com/venues/bar-tottis/'
          },
          {
            area: ['Bondi', 'Coogee'],
            mealType: ['Lunch', 'Sopper Time'],
            name: "Little L Burgers",
            notes: 'Known for their chicken berder but I actually think their beef berders are absolutely delicious',
            type: 'Berders',
            url: 'https://little-l.com.au'
          },
          {
            area: 'Bondi',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Macelleria',
            notes: 'Have had the steak, sausages and berders and they are all delicious',
            type: 'Steak',
            url: 'https://maps.app.goo.gl/p154765mheEBRCgs9'
          }
        ],
        Torquay: [
          {
            mealType: ['Breakfast', 'Lunch'],
            name: 'Pond Cafe',
            notes: 'Brisket sandwich to die for. Salty that they changed its ingredients some time between 2023 and 2023 but it still does the trick',
            type: 'Cafe',
            url: 'https://maps.app.goo.gl/emmRAwqHaPQUQXTx9'
          },
          {
            mealType: 'Sopper Time',
            name: 'Pearl',
            notes: 'Simple, delicious pasta',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/Dpjkp5aaza5phcDk6'
          },
          {
            mealType: ['Lunch'],
            name: 'Mortadeli',
            notes: "The coffee is a bit average, the merch sucks (sorry guys) but the sandwiches are bangin'",
            type: 'Sandwiches',
            url: 'https://maps.app.goo.gl/UYAC8dq5FtvLeXgW9'
          },
          {
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Sober Ramen',
            notes: 'My first ever ramen experience, absolutely delicious',
            type: 'Ramen',
            url: 'https://maps.app.goo.gl/2f8H1JK595FVqUtp9'
          }
        ]
      },
      France: {
        Paris: [
          {
            area: 'Central Paris',
            mealType: ['Lunch', 'Sopper Time'],
            name: "L'EntrecÃ´te de Paris",
            notes: "Really lives up to the hype, don't sleep on the desserts (the meringue tower thing is so good)",
            type: 'Steak',
            url: 'https://maps.app.goo.gl/uRbpuu1huCHpMBkv7'
          }
        ]
      },
      Indonesia: {
        Bali: [
          {
            area: 'Canggu',
            mealType: 'Sopper Time',
            name: "Luigi's Hot Pizza",
            notes: 'Amazing pizza and great tiramisu',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/4doDqMSzeDHFALVG7'
          },
          {
            area: ['Canggu', 'Seminyak'],
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Motel Mexicola',
            notes: 'My friends and I had an absolute blast here, the food is great and the place is a lot of fun',
            type: 'Mexican',
            url: 'https://motelmexicola.info'
          },
          {
            area: 'Seminyak',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Chandi',
            notes: "Some of the best steak I've ever had in my life",
            type: 'Asian',
            url: 'https://maps.app.goo.gl/BexU9ai13thdSB9U9'
          }
        ]
      },
      Italy: {
        Florence: [
          {
            area: 'Centro Storico',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Casella 18',
            notes: 'The single best meal I have ever eaten. Seriously. Pizza, pasta, and tiramisu are all must-orders',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/AcvLqwfeNxtoKpQ26'
          }
        ],
        Milan: [
          {
            area: ['Centro Storico', 'Isola'],
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Gino Sorbillo',
            notes: 'The best pizza I have ever had',
            type: 'Pizza',
            url: 'https://www.sorbillo.it'
          }
        ]
      },
      Netherlands: {
        Amsterdam: [
          {
            area: 'Centrum',
            mealType: 'Snacc',
            name: 'Manneken Pis Damrak',
            notes: 'Do not make the mistake of getting anything other than manneken pis sauce',
            type: 'Dutch',
            url: 'https://maps.app.goo.gl/vRbD1RXiun9L6KRM6'
          },
          {
            area: 'Centrum',
            mealType: 'Snacc',
            name: 'Van Stapele Koekmakerij',
            notes: 'Absolutely delicious cookies, rivals Levains',
            type: 'Cookies',
            url: 'https://maps.app.goo.gl/Xx34w1PbUcqk1rXj6'
          },
          {
            area: ['Amsterdam-Zuid', 'Amsterdam-Zuidoost', 'Centrum', 'De Baarsjes'],
            mealType: 'Snacc',
            name: "Dunkin' Donuts",
            notes: "I had never tried Dunkin' in America so wasn't expecting much but wow is it ever good, a must-visit after consuming some taste-enhancing buffs",
            type: 'Donuts',
            url: 'https://www.dunkin.nl'
          },
          {
            area: 'Jordaan',
            mealType: ['Breakfast', 'Lunch', 'Sopper Time'],
            name: 'Winkel 43',
            notes: "I don't eat apple pie so didn't try it (that's what they're famous for, and my friends raved about it) but I remember the coffee was banging",
            type: 'Cafe',
            url: 'https://maps.app.goo.gl/33woQTwDTJ7U4pYK6'
          },
          {
            area: 'Centrum',
            mealType: 'Snacc',
            name: "Rene's Croissanterie",
            notes: "This place is absolutely crazy, it's open almost 24/7 (6am - 2/3am every night) and has amazing churros, pancakes, and so much more",
            type: 'Bakery',
            url: 'https://maps.app.goo.gl/HYFPg4eHyf3Jnjr89'
          }
        ]
      },
      USA: {
        'Los Angeles': [
          {
            area: 'Everywhere',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Shake Shack',
            notes: 'Easily one of the best fast food berders around',
            type: 'Berders',
            url: 'https://shakeshack.com'
          },
          {
            area: 'Everywhere',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'In-N-Out',
            notes: 'This was my first taste of fast food in America when I was 15 and I made my brother Craig drive me to it every single day',
            type: 'Berders',
            url: 'https://www.in-n-out.com'
          },
          {
            area: 'Everywhere',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Popeyes Louisiana Kitchen',
            notes: 'Only got a chance to try the chicken sandwich but wow was it good, leagues above Chick-fil-A imo',
            type: 'Fried Chicken',
            url: 'https://www.popeyes.com'
          }
        ],
        'New York': [
          {
            area: 'Downtown',
            mealType: ['Breakfast', 'Lunch', 'Sopper Time'],
            name: "Katz's Delicatessen",
            notes: 'Truly lives up to the hype',
            type: 'Sandwiches',
            url: 'https://maps.app.goo.gl/sLUQUaj5tACoLfwa6'
          },
          {
            area: 'West Side',
            mealType: 'Snacc',
            name: 'Levain Bakery',
            notes: 'Cookies are to die for',
            type: 'Cookies',
            url: 'https://maps.app.goo.gl/76GDxrSL7yd7gS7J9'
          }
        ]
      }
    };
    const wantedPlaces = {
      Australia: {
        Melbourne: [
          {
            area: 'CBD',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Gourmet Curry Hut Indian Cuisine',
            notes: 'First Google result for "best butter chicken in melbourne"',
            type: 'Indian',
            url: 'https://maps.app.goo.gl/Pzo8BzeNhHG2kUrx9'
          },
          {
            area: 'Prahan',
            mealType: 'Sopper Time',
            name: 'Rossi',
            notes: 'Tiramisu looks absolutely nuts',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/vXJ9kyNzuVw22Uf86'
          },
          {
            area: 'CBD',
            mealType: 'Lunch',
            name: 'Waffle On',
            notes: 'The baguette sandwich is so cheap and looks unbelievable',
            type: 'Sandwiches',
            url: 'https://maps.app.goo.gl/TU61p7Zd1ErgdPzy5'
          },
          {
            area: 'Oakleigh',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Mythos Gyros Bar',
            notes: 'Saw on TikTok and just looks so tasty',
            type: 'Greek',
            url: 'https://maps.app.goo.gl/GHv4gC82QorWkKTSA'
          },
          {
            area: 'Windsor',
            mealType: 'Sopper Time',
            name: "Freddy's",
            notes: 'Looks like seriously cozy woodfire pizza and beer',
            type: 'Pizza',
            url: 'https://maps.app.goo.gl/zvdNKwFMNFZ7nQi88'
          },
          {
            area: 'Prahan',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'EntrecÃ´te',
            notes: 'Have had the delicious sandwiches from next door (see, Le Petit MarchÃ©) and have eaten at the original in Paris, but this one has a far wider menu and was described by a friend as his favourite restaurant in all of Melbourne',
            type: 'French',
            url: 'https://maps.app.goo.gl/J1QcFP68ZRLhTWpVA'
          },
          {
            area: 'Carlton',
            mealType: ['Lunch', 'Sopper Time'],
            name: "Johnny, Vince and Sam's Ristorante",
            notes: 'Supposedly super authentic and delicious Italian',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/x7PZhyrJJZPseTLU6'
          },
          {
            area: 'Richmond',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Pizzeria Da Bruno',
            notes: 'Looks like tasty, fancy Italian',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/7TCS2UkDNF2M3C1G9'
          },
          {
            area: 'South Yarra',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Caffe e Cucina',
            notes: 'Looks like expensive, delicious pasta',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/q8iwFpACLmkQ24fX7'
          },
          {
            area: 'Richmond',
            mealType: 'Sopper Time',
            name: 'Union House',
            notes: 'Wednesday steak night is meant to go hard',
            type: 'Steak',
            url: 'https://maps.app.goo.gl/QEAkKjWNR4Av1xMh7'
          },
          {
            area: 'CBD',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'HofbrÃ¤uhaus',
            notes: 'Had drinks and pretezels here once, want to come back and try the schnitzel',
            type: 'German',
            url: 'https://maps.app.goo.gl/ci1uCPkEmAo9G1o39'
          },
          {
            area: 'South Yarra',
            mealType: 'Sopper Time',
            name: 'Chez Olivier Le Bistro',
            notes: 'Saw this on TikTok and was sold by how good the starter bread and butter looks, let alone the steak',
            type: 'French',
            url: 'https://maps.app.goo.gl/mKM1KPdYXGALi6Ls5'
          },
          {
            area: 'Brunswick',
            mealType: ['Lunch', 'Sopper Time'],
            name: '400 Gradi',
            notes: 'Apparently the best pizza in Australia',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/X2cJpMVvPbn5Qir49'
          },
          {
            area: 'South Yarra',
            mealType: 'Lunch',
            name: "Zita's Focaccia",
            notes: 'Family run Italian joint, apparently the recipes are old nonna ones',
            type: 'Sandwiches',
            url: 'https://maps.app.goo.gl/CzgvbbzmTkXyEfVf7'
          },
          {
            area: 'Thornbury',
            mealType: 'Sopper Time',
            name: '1800 Lasagne',
            notes: 'Garlic bread and lasagne look so good',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/mQFeZACcWwZC8AUu5'
          },
          {
            area: 'Collingwood',
            mealType: 'Lunch',
            name: 'Stefanino Panino',
            notes: 'Looks like a great deli-style sandwich place',
            type: 'Sandwiches',
            url: 'https://maps.app.goo.gl/FPndwCLgARnuaBe16'
          },
          {
            area: 'CBD',
            mealType: 'Sopper Time',
            name: "Ronnie's",
            notes: 'The focaccia and vodka pasta both look so good',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/wGgCLswokMB55ZMJ8'
          },
          {
            area: 'Brunswick',
            mealType: 'Snacc',
            name: "Luther's Scoops",
            notes: 'Bit of a trek for ice cream but it does look really good',
            type: 'Ice Cream',
            url: 'https://maps.app.goo.gl/foF2EcZqMmeCS5Kv7'
          },
          {
            area: ['Hawthorn', 'Windsor'],
            mealType: 'Snacc',
            name: 'The Cookie Box',
            notes: "Not sure it'll be Levain level but it does look very good",
            type: 'Cookies',
            url: 'https://thecookiebox.com.au'
          },
          {
            area: 'CBD',
            mealType: 'Snacc',
            name: 'Shortstop Coffee & Donuts',
            notes: 'The donuts look delicious without being sickly sweet',
            type: 'Donuts',
            url: 'https://maps.app.goo.gl/8uGmwqkSDd6epkhYA'
          },
          {
            area: 'Carlton North',
            mealType: ['Breakfast', 'Lunch'],
            name: 'Florian',
            notes: 'Apparently the chicken sandwich is amazing',
            type: 'Cafe',
            url: 'https://maps.app.goo.gl/BTmGtZUUG71vYras7'
          },
          {
            area: 'CBD',
            mealType: ['Breakfast', 'Lunch', 'Sopper Time'],
            name: 'Operator Diner',
            notes: 'Pretty reasonably priced and food looks true to proper American diners',
            type: 'Diner',
            url: 'https://maps.app.goo.gl/B1GsGRtnTkfg952X6'
          },
          {
            area: 'CBD',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'The Waiters Restaurant',
            notes: 'Homey-looking place tucked away in a laneway, food looks delicious',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/Pf6NTAikn7c1TqrF6'
          },
          {
            area: 'Bentleigh',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Markos Greek Kitchen Bar',
            notes: 'Have tried Alati just down the road, and took issue with the price, portion size, lack of mixed gyros option, and mutual exclusivity between chips and pita. This place appears to solves all of that',
            type: 'Greek',
            url: 'https://maps.app.goo.gl/5Bm32F29wKHhzdiQ7'
          },
          {
            area: 'Brunswick',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Juanita Peaches',
            notes: 'The berders, fried chicken and donuts look amazing',
            type: 'Diner',
            url: 'https://maps.app.goo.gl/esAgr1kmztpouTwe7'
          }
        ],
        Sydney: [
          {
            area: ['CBD', 'Double Bay'],
            mealType: 'Sopper Time',
            name: 'Matteo',
            notes: 'Have heard the pasta and tiramisu are great',
            type: 'Italian',
            url: 'https://www.matteosydney.com'
          },
          {
            area: ['Moore Park', 'Circular Quay', 'Newtown'],
            mealType: ['Lunch', 'Sopper Time'],
            name: "Mary's",
            notes: "An American on TikTok said this was the closest thing he's had in Australia to an American chicken sandwich",
            type: 'Berders',
            url: 'https://www.marys.wtf'
          },
          {
            area: 'Rosebery',
            mealType: 'Lunch',
            name: 'Kostas Takeaway',
            notes: 'Seen on TikTok, sandwiches look really tasty',
            type: 'Sandwiches',
            url: 'https://maps.app.goo.gl/rkQrCRzT7W2GgDbX8'
          },
          {
            area: 'Chippendale',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Spice Alley',
            notes: "Mimi's recommendation",
            type: 'Food Courts',
            url: 'https://maps.app.goo.gl/8T26rnuVBxaoX3719'
          }
        ],
      },
      Indonesia: {
        Bali: [
          {
            area: ['Denpasar', 'Kuta', 'Jimbaran', 'Seminyak'],
            mealType: 'Snacc',
            name: 'J.Co Donuts & Coffee',
            notes: 'Apparently the donuts and frappes are absolutely amazing',
            type: 'Donuts',
            url: 'https://www.jcodonuts.com'
          }
        ]
      },
      UK: {
        London: [
          {
            area: ['Central London', 'East London', 'South London', 'West London'],
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Butchies',
            notes: 'The fried chicken looks absolutely unbelievable',
            type: 'Fried Chicken',
            url: 'https://butchies.co.uk/'
          },
          {
            area: 'Central London',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Supernova',
            notes: 'The berders and ice cream look fantastic',
            type: 'Berders',
            url: 'https://maps.app.goo.gl/eoomAzFr63U7QUkj9'
          },
          {
            area: ['Central London', 'City of London', 'East London', 'West London'],
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Bleecker Burger',
            notes: 'Some say overrated but they look like pretty solid berders',
            type: 'Berders',
            url: 'https://www.bleecker.co.uk'
          },
          {
            area: 'Central London',
            mealType: 'Sopper Time',
            name: 'Manna',
            notes: 'Look like absolutely solid smash berders',
            type: 'Berders',
            url: 'https://maps.app.goo.gl/mf57av4CfvxdMq3q6'
          },
          {
            area: 'North London',
            mealType: 'Sopper Time',
            name: 'The Plimsoll',
            notes: 'Apparently the best berders in London',
            type: 'Berders',
            url: 'https://maps.app.goo.gl/3DFcQE2UFCnKvT7T7'
          }
        ]
      },
      USA: {
        Austin: [
          {
            area: 'East Austin',
            mealType: 'Lunch',
            name: 'Franklin Barbacue',
            notes: 'Supposed to be the best BBQ in the world',
            type: 'BBQ',
            url: 'https://maps.app.goo.gl/yGd7fMYYMH3jw4pq8'
          }
        ],
        Chicago: [
          {
            area: 'North Side',
            mealType: ['Lunch', 'Sopper Time'],
            name: "Johnnie's Beef",
            notes: 'Italian beef sandwiches are meant to be fuuucked',
            type: 'American',
            url: 'https://maps.app.goo.gl/x7vaWHJYq8Xezosb7'
          },
          {
            area: ['Near North Side', 'Near West Side', 'Northwest Side'],
            mealType: ['Lunch', 'Sopper Time'],
            name: "Portillo's",
            notes: 'Gotta be one of the most famous fast food places in the world, Greg Miller even named his beloved sausage dog after it',
            type: 'American',
            url: 'https://www.portillos.com/index.html'
          },
          {
            area: 'North Side',
            mealType: ['Lunch', 'Sopper Time'],
            name: "Pequod's Pizza",
            notes: 'Supposedly the best deep dish pizza around',
            type: 'Pizza',
            url: 'https://maps.app.goo.gl/PWdFbDdrhJQTaFZU8'
          }
        ],
        'Los Angeles': [
          {
            area: ['Silver Lake', 'Venice'],
            mealType: ['Lunch', 'Sopper Time'],
            name: 'The Win~Dow',
            notes: 'I absolutely love smash berders, and these are meant to be some of the best in LA',
            type: 'Berders',
            url: 'https://www.thewin-dow.la'
          },
          {
            area: 'Studio City',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Easy Street Burgers',
            notes: 'Have seen multiple huge food TikTokers saying they are the best berders in LA',
            type: 'Berders',
            url: 'https://maps.app.goo.gl/1EmUHmqriAbfhary7'
          },
          {
            area: 'Venice',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'El Primo Taco',
            notes: 'Meant to be some of the best tacos in LA',
            type: 'Mexican',
            url: 'https://maps.app.goo.gl/VXCCW6Gy1wigvxXy9'
          },
          {
            area: 'Melrose Hill',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Le Coupe',
            notes: 'The guy is a fine dining chef from Louisana so you know the chicken is going to smack',
            type: 'Fried Chicken',
            url: 'https://maps.app.goo.gl/zj2n3yFbFfcGDbqu8'
          }
        ],
        // https://en.wikipedia.org/wiki/List_of_Manhattan_neighborhoods
        'New York': [
          {
            area: 'Downtown',
            mealType: 'Sopper Time',
            name: '4 Charles Prime Rib',
            notes: 'Meant to be the best berder in NYC, and the truffle mac and cheese + chocolate pie look absolutely unbelievable',
            type: 'Steak',
            url: 'https://maps.app.goo.gl/tPUxEgewTZcFJfm27'
          },
          {
            area: 'West Side',
            mealType: ['Lunch', 'Sopper Time'],
            name: "Mama's TOO!",
            notes: 'Meant to be some of the best pizza in NYC',
            type: 'Pizza',
            url: 'https://maps.app.goo.gl/GMcUCepVJiWGz5Ua9'
          },
          {
            area: ['Downtown', 'East Side'],
            mealType: ['Breakfast', 'Lunch', 'Sopper Time'],
            name: "Ruby's Cafe",
            notes: 'Apparently the berder and schnitzel are must tries',
            type: 'Australian',
            url: 'https://www.rubyscafe.com'
          },
          {
            area: 'West Side',
            mealType: ['Breakfast', 'Lunch', 'Sopper Time'],
            name: 'Maison Pickle',
            notes: '24 layer chocolate cake...',
            type: 'American',
            url: 'https://maps.app.goo.gl/5e4L8TjTGtF1Q9jg7'
          },
          {
            area: ['Downtown', 'East Side', 'Midtown', 'Brooklyn'],
            mealType: ['Lunch', 'Sopper Time'],
            name: "Joe's Pizza",
            notes: "Some claim it's overrated, want to find out for myself",
            type: 'Pizza',
            url: 'https://www.joespizzanyc.com'
          },
          {
            area: 'Downtown',
            mealType: ['Breakfast', 'Lunch', 'Sopper Time'],
            name: "Bubby's",
            notes: 'Pancakes are meant to be amazing',
            type: 'American',
            url: 'https://maps.app.goo.gl/W9WwNyyWubu1oA3c8'
          },
          {
            area: ['East Side', 'Downtown', 'West Side'],
            mealType: 'Snacc',
            name: 'Chip City',
            notes: "Not sure it can hold up to Levain but one way to find out",
            type: 'Cookies',
            url:' https://chipcitycookies.com'
          },
          {
            area: 'Downtown',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Carbone',
            notes: 'Pretty spenny',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/mgg9afNMgLxEJUa56'
          },
          {
            area: 'Brooklyn',
            mealType: ['Lunch', 'Sopper Time'],
            name: "L'Industrie Pizzeria",
            notes: 'Pizza looks so absurdly good. They also have great looking sandwiches on a Wednesday, and great looking desserts',
            type: 'Pizza',
            url: 'https://maps.app.goo.gl/mbDmF1sKrK3TNZ6h7'
          },
          {
            area: ['Downtown', 'Midtown'],
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Los Tacos No.1',
            notes: 'This place has 4.8 stars out of 10k reviews... Tacos are meant to be fucked up',
            type: 'Mexican',
            url: 'https://www.lostacos1.com'
          },
          {
            area: ['Downtown', 'East Side'],
            mealType: ['Breakfast', 'Lunch'],
            name: 'Tompkins Square Bagels',
            notes: 'Bagels look so good',
            type: 'Bagels',
            url: 'https://www.tompkinssquarebagels.com'
          },
          {
            area: ['Downtown', 'Brooklyn'],
            mealType: 'Snacc',
            name: 'Kith Treats',
            notes: 'Ice cream with toppings',
            type: 'Ice Cream',
            url: 'https://kith.com'
          },
          {
            area: ['Downtown', 'Midtown'],
            mealType: ['Breakfast', 'Lunch'],
            name: 'Liberty Bagels',
            notes: 'Apparently way better than Tompkins',
            type: 'Bagels',
            url: 'https://libertybagels.com/locations-2/'
          },
          {
            area: ['Midtown', 'West Side'],
            mealType: ['Lunch', 'Sopper Time'],
            name: "Carmine's",
            notes: 'Italian food that is 4.5 out of 15k reviews, nuff said',
            type: 'Italian',
            url: 'https://www.carminesnyc.com'
          },
          {
            area: 'Downtown',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Prince Street Pizza',
            notes: 'S Q U A R E',
            type: 'Pizza',
            url: 'https://maps.app.goo.gl/vmFTPcT31DHyVPA67'
          },
          {
            area: 'Midtown',
            mealType: ['Breakfast', 'Lunch', 'Sopper Time'],
            name: "Ellen's Stardust Diner",
            notes: 'I am dying to try a proper American diner and this one has almost 18k reviews',
            type: 'Diner',
            url: 'https://maps.app.goo.gl/AQFYhGK6Q3pR3Ppb9'
          },
          {
            area: 'Upper Manhattan',
            mealType: ['Breakfast', 'Lunch', 'Sopper Time'],
            name: "Tom's",
            notes: "I only want to go here because it's the Seinfeld diner",
            type: 'Diner',
            url: 'https://maps.app.goo.gl/TsJ9AFV63zsQmQkT6'
          },
          {
            area: 'Downtown',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Fiaschetteria "Pistoia"',
            notes: 'This place is "Tuscan" according to Google, whatever that actually means',
            type: 'Italian',
            url: 'https://www.fiaschetteriapistoia.com'
          },
          {
            area: ['Downtown', 'Midtown', 'Brooklyn'],
            mealType: ['Lunch', 'Sopper Time'],
            name: "Raising Canes's Chicken Fingers",
            notes: 'Completely forgot to try this last time I was in NYC and forever kicking myself (I love fast food lol)',
            type: 'Fried Chicken',
            url: 'https://www.raisingcanes.com'
          },
          {
            area: ['Midtown', 'Downtown'],
            mealType: 'Lunch',
            name: 'ALIDORO',
            notes: 'Italian deli sandwiches that look to die for',
            type: 'Sandwiches',
            url: 'https://www.alidoronyc.com'
          },
          {
            area: 'Downtown',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Hamburger America',
            notes: 'These smash berders look so good',
            type: 'Berders',
            url: 'https://maps.app.goo.gl/6dZaugr3W3PTUCtw5'
          },
          {
            area: 'Midtown',
            mealType: ['Breakfast', 'Lunch'],
            name: 'Best Bagel & Coffee',
            notes: 'Very big call right in the name',
            type: 'Bagels',
            url: 'https://maps.app.goo.gl/aTWPG3adMzVzcJt36'
          },
          {
            area: 'Downtown',
            mealType: ['Lunch', 'Sopper Time'],
            name: 'Bar Pitti',
            notes: 'One of the more authentic Italian places, apparently the bolognese is great',
            type: 'Italian',
            url: 'https://maps.app.goo.gl/MLiZKMANHtPDWijn7'
          },
          {
            area: 'Downtown',
            mealType: 'Snacc',
            name: 'La Cabra',
            notes: 'Apparently the cardamom buns are to die for',
            type: 'Bakery',
            url: 'https://www.lacabra.dk'
          }
        ]
      }
    };

    let hashData = {};
    try {
      hashData = JSON.parse(decodeURIComponent(location.hash.slice(1)));
    } catch {
      // leave default
    }

    const getRawPlaces = (status = statusElement.value) => status === 'wanted' ? wantedPlaces : triedPlaces;
    const flattenRawPlaces = (rawPlaces) => Object.values(rawPlaces).flatMap((places) => Object.values(places).flat());

    // tests lol
    const isDev = location.protocol === 'file:';
    if (isDev) {
      for (const status of ['wanted', 'tried']) {
        const rawPlaces = getRawPlaces(status);
        const flattenedRawPlaces = flattenRawPlaces(rawPlaces);
        const failsTest1 = flattenedRawPlaces.filter(({ area, url }) => (Array.isArray(area) || area === 'Everywhere') && url.includes('maps')).map(({ name }) => name);
        if (failsTest1.length > 0) {
          throw new Error(`places with multiple locations must link to website (see ${failsTest1.join(', ')})`);
        }

        const validMealTypes = [
          'Snacc',
          'Breakfast',
          'Lunch',
          'Sopper Time'
        ];
        const failsTest2 = flattenedRawPlaces.filter(({ mealType }) => (Array.isArray(mealType) ? mealType : [mealType]).some((type) => !validMealTypes.includes(type))).map(({ name }) => name);;
        if (failsTest2.length > 0) {
          throw new Error(`invalid meal types (see ${failsTest2.join(', ')})`);
        }
      }
    }

    const numPlacesElement = document.getElementById('numPlaces');
    const numPlaces = ['wanted', 'tried'].reduce((count, status) => {
      const rawPlaces = getRawPlaces(status);
      return count + flattenRawPlaces(rawPlaces).length;
    }, 0);
    numPlacesElement.innerText = numPlaces;

    const cityElement = document.getElementById('city');
    let selectedCity = hashData.city || localStorage.getItem('city') || 'Melbourne';
    cityElement.value = selectedCity;
    cityElement.addEventListener('change', (event) => {
      selectedCity = event.target.value;
      setPlaces(true);
      localStorage.setItem('city', selectedCity);
    });

    const mealTypeElement = document.getElementById('mealType');
    let selectedMealType = hashData.mealType || localStorage.getItem('mealType') || 'Any';
    mealTypeElement.value = selectedMealType;
    mealTypeElement.addEventListener('change', (event) => {
      selectedMealType = event.target.value;
      setPlaces();
      localStorage.setItem('mealType', selectedMealType);
    });

    const categoryElement = document.getElementById('category');
    const mealTypeCategoryElement = document.getElementById('mealTypeCategory');
    categoryElement.value = hashData.category || localStorage.getItem('category') || 'area';
    categoryElement.addEventListener('change', (event) => {
      setPlaces();
      localStorage.setItem('category', event.target.value);
    });

    const statusElement = document.getElementById('status');
    statusElement.value = hashData.status || localStorage.getItem('status') || 'tried';
    statusElement.addEventListener('change', (event) => {
      setCities();
      setPlaces(true);
      localStorage.setItem('status', event.target.value);
    });

    const cloneAndSort = (array, callback) => [...array].sort(callback);

    const setCities = () => {
      cityElement.innerHTML = '';

      const rawPlaces = getRawPlaces();
      Object.entries(rawPlaces).forEach(([country, cities]) => {
        const optgroup = document.createElement('optgroup');
        optgroup.label = country;

        Object.keys(cities).forEach((city) => {
          const option = document.createElement('option');
          option.value = city;
          option.innerText = `${city} (${cities[city].length})`;

          optgroup.appendChild(option);
        });

        cityElement.appendChild(optgroup);
      });

      cityElement.value = selectedCity;
    };
    setCities();

    const placesContainerElement = document.getElementById('placesContainer');
    const setPlaces = (updateMealTypes) => {
      const rawPlaces = getRawPlaces();
      const allCities = Object.values(rawPlaces).flatMap((places) => Object.keys(places));
      if (!allCities.includes(selectedCity)) {
        selectedCity = allCities[0];
        cityElement.value = selectedCity;
        localStorage.setItem('city', selectedCity);
      }

      location.hash = encodeURIComponent(JSON.stringify({
        category: categoryElement.value,
        city: selectedCity,
        mealType: selectedMealType,
        status: statusElement.value
      }));

      const headingKey = categoryElement.value;

      placesContainerElement.innerHTML = '';

      let selectedPlaces = [
        ...Object.values(rawPlaces)
          .flatMap((cityCollections) => Object.entries(cityCollections))
          .find(([city]) => city === selectedCity)[1]
      ];
      const mealTypes = new Set(selectedPlaces.flatMap(({ mealType }) => mealType));
      if (!mealTypes.has(selectedMealType)) {
        selectedMealType = 'Any';
        updateMealTypes = true;
      }

      mealTypeCategoryElement.disabled = selectedMealType !== 'Any';
      mealTypeElement.disabled = headingKey === 'mealType';

      if (updateMealTypes) {
        mealTypeElement.innerHTML = '';

        const sortedMealTypes = [...mealTypes].sort((a, b) => {
          if (a === 'Snacc' && b !== 'Snacc') {
            return -1;
          }

          if (b === 'Snacc' && a !== 'Snacc') {
            return 1;
          }

          if (a > b) {
            return 1;
          }

          if (b > a) {
            return -1;
          }

          return 0;
        });
        ['Any', ...sortedMealTypes].forEach((mealType) => {
          const option = document.createElement('option');
          option.innerText = option.value = mealType;

          mealTypeElement.appendChild(option);
        });

        mealTypeElement.value = selectedMealType;
      }

      if (selectedMealType !== 'Any') {
        selectedPlaces = selectedPlaces.filter(({ mealType }) => {
          if (Array.isArray(mealType)) {
            return mealType.includes(selectedMealType);
          }

          return mealType === selectedMealType;
        });
      }

      if (headingKey === 'area' || headingKey === 'mealType') {
        const withMultiple = selectedPlaces.filter((place) => Array.isArray(place[headingKey]));
        withMultiple.forEach((place) => {
          // can't use index arg here since we are splicing on each iteration
          selectedPlaces.splice(selectedPlaces.indexOf(place), 1);
          const { [headingKey]: values, ...rest } = place;
          values.forEach((value) => {
            selectedPlaces.push({
              ...rest,
              [headingKey]: value
            });
          });
        });
      }

      const sortedPlaces = cloneAndSort(selectedPlaces, (a, b) => {
        if (headingKey === 'mealType') {
          if (a[headingKey] === 'Snacc' && b[headingKey] !== 'Snacc') {
            return -1;
          }

          if (b[headingKey] === 'Snacc' && a[headingKey] !== 'Snacc') {
            return 1;
          }
        }

        if (a[headingKey] > b[headingKey]) {
          return 1;
        }

        if (b[headingKey] > a[headingKey]) {
          return -1;
        }

        if (a.name > b.name) {
          return 1;
        }

        if (b.name > a.name) {
          return -1;
        }

        return 0;
      });
      const placesByHeading = {};
      sortedPlaces.forEach((place) => {
        const headingValue = place[headingKey] || selectedCity;
        if (!placesByHeading[headingValue]) {
          placesByHeading[headingValue] = [];
        }

        placesByHeading[headingValue].push(place);
      });

      for (const [heading, places] of Object.entries(placesByHeading)) {
        const headingElement = document.createElement('span');
        headingElement.className = 'heading';
        headingElement.innerText = `${headingKey === 'type' ? `${emojisByType[heading]} ` : ''}${heading}`;
        placesContainerElement.appendChild(headingElement);

        const placesElement = document.createElement('div');
        places.forEach((place) => {
          const placeElement = document.createElement('div');

          const emojiElement = document.createElement('span');
          if (headingKey !== 'type') {
            emojiElement.innerText = emojisByType[place.type];
          }

          const subHeadingElement = document.createElement('a');
          subHeadingElement.className = 'subHeading';
          subHeadingElement.href = place.url;
          subHeadingElement.target = '_blank';
          subHeadingElement.innerText = place.name;
          emojiElement.appendChild(subHeadingElement);

          const notesElement = document.createElement('div');
          notesElement.innerText = place.notes;

          placeElement.appendChild(emojiElement);
          if (headingKey !== 'type' || place.area) {
            const areaOrTypeElement = document.createElement('span');
            const maybeArrayToString = (maybeArray) => (Array.isArray(maybeArray) ? cloneAndSort(maybeArray).join(', ') : maybeArray);
            const areaString = maybeArrayToString(place.area);
            areaOrTypeElement.innerText = headingKey === 'type' ? areaString : place.type;
            if (headingKey === 'mealType') {
              if (areaString) {
                areaOrTypeElement.innerText += ` (${areaString})`;
              }
            } else if (place.mealType !== 'Snacc' && selectedMealType === 'Any') {
              areaOrTypeElement.innerText += ` (${maybeArrayToString(place.mealType)})`;
            }
            areaOrTypeElement.className = 'areaOrType';
            placeElement.appendChild(areaOrTypeElement);
          }
          placeElement.appendChild(notesElement);

          placesElement.appendChild(placeElement);
        });
        placesContainerElement.appendChild(placesElement);
      }
    };

    setPlaces(true);
  </script>
</body>
</html>
